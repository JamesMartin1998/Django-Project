{% extends 'base.html' %}

{% block content %}

{% load crispy_forms_tags %}

    <div>
        <h1 class="center-title">{{ movie.title }}</h1>
    </div>

    <div class="d-flex justify-content-center align-items-center">
        <div class="movie-showcase-div col-sm-10 col-md-8 col-lg-6" >
            <img src="{{ movie.featured_image.url }}" alt="{{ movie.title }} Image">
        </div>
    </div>

    <div class="movie-desc d-flex justify-content-center align-items-center">
        <ul>
            <li class="mb-2">{{ movie.description }}</li>
            <li><span>Run Time: </span>{{ movie.run_time }} Minutes</li>
        </ul>
    </div>

    <div class="d-flex justify-content-center align-items-center">
        <a href="{% url 'shows' slug=movie.slug %}"><button class="custom-btn">Book Ticket</button></a>
    </div> 

    <hr>
    <!-- Reviews adapts on Comment code from Code Institute's Django Blog Project -->
    <div class="reviews-container">
        {% if user.is_authenticated %}
        <div class="make-review-div">
            <div class="d-flex justify-content-center">
                <h3 class="center-title">Add A Review</h3>    
            </div>
            <div class="review-form-container">
                <form method="POST" action="">
                    {{ review_form | crispy }}
                    {% csrf_token %}
                    <div class="d-flex justify-content-center">
                        <button class="small-btn mt-3" type="submit">Submit</button>
                    </div>
                </form>
            </div>
        </div>
        {% endif %}
        <div class="review-list-div">
            <div class="d-flex justify-content-center">
                <h2 class="center-title mb-3">Reviews</h2>
            </div>

            {% if reviews|length == 0 %}

                <p class="no-reviews">There are no reviews for this movie yet.</p>

            {% else %}

            {% for review in reviews %}
                <div>
                    <p class="review-p">
                        <strong>
                            {{ review.name }} - {{ review.date_added }}
                        </strong>
                        <br>
                        {{ review.body}}
                    </p>
                </div>
            {% endfor %}

            {% endif %}
        </div>
    </div>















    <!-- Code for Reviews from https://www.youtube.com/watch?v=hZrlh4qU4eQ and https://www.youtube.com/watch?v=OuOB9ADT_bo -->
    <!-- <div class="reviews-container">
        <hr>
        <h2>Reviews</h2>
        <br/>

        <div class="review-list-div">
            {% if not movie.reviews.all %}
                There are no reviews for this movie at the moment.
            {% else %}
                {% for review in movie.reviews.all %}
                    <strong>
                        {{ review.name }} -
                        {{ review.date_added }}
                    </strong>
                    <br/>
                    {{ review.body }}
                    <br/><br/>
                {% endfor %}
                <hr>
            {% endif %}
        </div>

        <div class="make-review-div">
            <h3>Add Review</h3>
            <form method="POST" action="">
                {% csrf_token %}
                <label for="review">Your Review</label>
                <textarea name="review" id="review" cols="30" rows="10"></textarea>
                <button type="submit">Submit</button>
            </form>
        </div>
        
    </div> -->
        
    
{% endblock %}